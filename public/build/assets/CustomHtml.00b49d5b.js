import{R as e,r as d,H as h}from"./app.556a3bcf.js";import{c as E}from"./reactstrap.modern.1d12cc3c.js";import{E as v}from"./Editor.0e40566e.js";import"./react-toastify.esm.ea0b512f.js";import{C as y}from"./ControlField.e500cd2d.js";import"./index.04ccc04b.js";import"./popper.824c9986.js";import"./Transition.b01bfd7b.js";import"./clsx.m.256e9345.js";import"./switch.ba69350b.js";import"./keyboard.21bc586a.js";function _({html:l,onChange:r,height:i=300}){const[m,f]=e.useState(l),c=d.exports.useRef(null),u=(n,o)=>new Promise((p,a)=>{const t=new XMLHttpRequest;t.withCredentials=!1,t.open("POST","/panel/forms/upload"),t.upload.onprogress=s=>{o(s.loaded/s.total*100)},t.onload=()=>{if(t.status===403){a({message:"HTTP Error: "+t.status,remove:!0});return}if(t.status<200||t.status>=300){a("HTTP Error: "+t.status);return}const s=JSON.parse(t.responseText);if(!s||typeof s.url!="string"){a("Invalid JSON: "+t.responseText);return}p(s.url)},t.onerror=()=>{a("Image upload failed due to a XHR Transport error. Code: "+t.status)};const g=new FormData;g.append("files",n.blob(),n.filename()),t.send(g)});return e.createElement(e.Fragment,null,e.createElement(v,{tinymceScriptSrc:"/tinymce/tinymce.min.js",onInit:(n,o)=>c.current=o,initialValue:m,onEditorChange:r,init:{height:i,menubar:!1,relative_urls:!1,remove_script_host:!1,convert_urls:!0,plugins:["advlist","autolink","lists","link","image","charmap","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","preview","help","wordcount"],toolbar:"blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | link image | media | help",images_upload_handler:u,content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}))}function I({fieldList:l,index:r,active:i,updateField:m,isPublic:f}){const[c,u]=d.exports.useState(l[r]),n=d.exports.useMemo(()=>{const a=/<img.*?src="(.*?)"/,t=c.html_codes.match(a);return t?t[1]:null},[c.html_codes]);function o(){return{__html:l[r].html_codes}}function p(a,t){u({...c,[a]:t}),l[r]={...l[r],[a]:t},m(r,l[r])}return f?e.createElement("div",{className:"flex-auto px-8 py-1"},n&&e.createElement(h,null,e.createElement("meta",{property:"og:image",content:n})),e.createElement("div",{className:"mb-4 pr-6 "},e.createElement("div",{dangerouslySetInnerHTML:o()}))):r===i?e.createElement("div",{className:"flex-auto px-6 py-1 field-active border-indigo-600"},e.createElement("div",null,e.createElement("div",{className:"flex flex-wrap"},e.createElement("div",{className:"w-1/2"},e.createElement("div",{className:"font-black text-lg -ml-2 px-2 text-gray-800 mb-5 flex"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})),e.createElement("div",{className:"ml-1"},"TEXT")))),e.createElement("div",null,e.createElement(E,null,e.createElement(_,{html:l[r].html_codes,onChange:a=>p("html_codes",a),height:250})),e.createElement("div",null),e.createElement("br",null)),e.createElement(y,{key:r,fieldList:l,index:r,updateField:m}))):e.createElement("div",{className:"flex-auto px-6 py-1",onClick:()=>m(r,l[r])},e.createElement("div",{className:"my-3"},e.createElement("div",{className:"ql-editor"},e.createElement("div",{dangerouslySetInnerHTML:o()}))))}export{I as default};
