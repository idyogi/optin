import{u as k,R as e,d as o}from"./app.556a3bcf.js";import{P as w}from"./PanelLayout.58d59c84.js";import{F as g,I as N,S as C,O as S,a as I,D}from"./DatePicker2.cdfe3327.js";import{g as P}from"./helper.923ff964.js";import{Q as p}from"./react-toastify.esm.ea0b512f.js";import{M as F}from"./MenuItem.96393e74.js";import"./open-closed.1ba341ae.js";import"./keyboard.21bc586a.js";import"./reactstrap.modern.1d12cc3c.js";import"./index.04ccc04b.js";import"./popper.824c9986.js";import"./Transition.b01bfd7b.js";import"./dayjs.min.5ab57970.js";import"./CSSTransition.e1bd1bc9.js";import"./clsx.m.256e9345.js";function G({campaign:r,lists:f,allLists:s}){const d=k(r||{}),{data:n,setData:m}=d,[b,x]=e.useState(0),[i,h]=e.useState(f.map(t=>t.id)||[]),y=t=>{t.preventDefault()},c=(t=!0)=>{let a=P();console.log("getCurrentUrl"+a),a=a.replace("/create",""),a=a.replace("/edit",""),r&&(d.transform(l=>({...l,_method:"PUT"})),a=a+"?_method=PUT"),o.Inertia.put(a,{...n,lists:i,is_schedule:t},{preserveScroll:!0,onSuccess:()=>{o.Inertia.reload(),p.success("Form has been updated")},onError:()=>p.error("Failed to update form")})};function E(t){const a=t.target.value;let l=0;s.forEach(u=>{a.includes(u.id)&&(l+=u.contacts.length)}),x(l),h(t.target.value)}function v(t,a){m(t,a)}return e.createElement("div",null,e.createElement(w,{title:n.name},e.createElement("div",{className:"py-6"},e.createElement("div",{className:"mx-auto w-full px-8 max-w-5xl"},e.createElement("form",{onSubmit:y,className:"divide-y divide-gray-200 rounded-lg bg-white shadow dark:divide-gray-800 dark:bg-gray-700 dark:text-gray-300"},e.createElement("div",{className:"space-y-4 rounded-lg border border-gray-200 p-8 dark:border-gray-600 dark:text-gray-300"},e.createElement("div",{className:"col-span-4"},e.createElement("div",null,e.createElement("label",{className:"inline-block text-sm font-medium dark:text-gray-300"},"Title"),e.createElement("div",{className:"mt-1"},e.createElement("input",{value:n.name,onChange:t=>m("name",t.target.value),className:"form-input border-gray-300 focus:border-blue-300 w-full shadow-sm dark:bg-gray-800 dark:text-gray-300 dark:border-gray-900 rounded-md",type:"text",placeholder:""})))),e.createElement("div",{className:"col-span-4"},e.createElement("label",{className:"inline-block text-sm font-medium dark:text-gray-300"},"Pilih minimal satu list"),e.createElement("div",{className:"grid max-w-xl grid-cols-4 gap-4"},e.createElement("div",{className:"col-span-4"},e.createElement("div",null,e.createElement("div",null,e.createElement(g,{sx:{m:1,width:300}},e.createElement(N,{id:"demo-multiple-name-label"},"List"),e.createElement(C,{labelId:"demo-multiple-name-label",id:"demo-multiple-name",value:i,onChange:E,multiple:!0,input:e.createElement(S,{label:"Name"})},s.map(t=>e.createElement(F,{key:t.id,value:t.id},t.name," (",t.contacts.length," contacts)"))),e.createElement(I,null,b," contacts"))))))),e.createElement("div",null,e.createElement("label",{className:"inline-block text-sm font-medium dark:text-gray-300"},"Whatsapp text"),e.createElement("textarea",{value:n.text,onChange:t=>m("text",t.target.value),className:"form-textarea w-full rounded-md shadow-sm mt-1 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-900",rows:"3",placeholder:""})),e.createElement("div",null,e.createElement("label",{className:"inline-block text-sm font-medium dark:text-gray-300"},"Schedule"),e.createElement("div",{className:"relative rounded-md shadow-sm"},e.createElement(g,{sx:{m:1,width:"25ch"},variant:"outlined"},e.createElement(D,{name:"scheduled_at",datetime:n.scheduled_at,onChanged:v}))))),e.createElement("footer",{className:"rounded-b-lg bg-gray-50 px-6 py-3 dark:border-gray-800 dark:bg-gray-800 dark:text-gray-200"},e.createElement("div",{className:"flex items-center justify-end space-x-2"},e.createElement("button",{onClick:()=>o.Inertia.get("/panel/campaigns/"+r.uuid+"/delete"),type:"button",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-danger-500 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},"Delete"),e.createElement("button",{onClick:()=>c(!1),type:"button",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-warning-500 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"Save as draft"),r.status==="done"?e.createElement("button",{onClick:()=>o.Inertia.get("/panel/campaigns/"+r.uuid+"/duplicate"),type:"button",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-warning-500 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"Duplicate campaign"):e.createElement("button",{onClick:()=>c(!0),className:"inline-flex items-center justify-center text-sm font-medium transition-all ease-in-out duration-100 focus:outline-none focus:ring border rounded-md border-primary-500 bg-primary-500 text-white shadow hover:bg-primary-400 hover:border-primary-400 focus:border-primary-700 focus:bg-primary-600 px-3 py-2 text-sm"},"Schedule campaign"))))))))}export{G as default};
